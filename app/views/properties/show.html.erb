<div class="property-main-photo" style="background-image:url('<%= property_photo_url @property %>')">  
</div>  

<div class="container">
  <div class="row">
    <div class="col-md-8">
      <div class="row">
        <div class="col-lg-5">
          <p class="h4 mb-0"><%= @property.for_sale? ? "For Sale" : "For Rent" %></p>
          <p class="mb-2"><%= @property.address %></p>
          <p class="h2 mb-3">
            <% if @property.for_sale? %>
              <%= @property.price > 0 ? number_to_currency(@property.price, precision: 0) : "Offers Accepted" %>
            <% else %>
              <%= @property.price > 0 ? number_to_currency(@property.price, precision: 0) : "Open for enquiries" %> / month
            <% end %>
        </div>  
        <div class="col-lg-7 text-center">
          <div class="row mt-sm-3 bg-light p-3">
            <div class="col-4">
              <span><svg height="1.5em" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bed" class="svg-inline--fa fa-bed fa-w-20 text-muted" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M176 256c44.11 0 80-35.89 80-80s-35.89-80-80-80-80 35.89-80 80 35.89 80 80 80zm352-128H304c-8.84 0-16 7.16-16 16v144H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v352c0 8.84 7.16 16 16 16h32c8.84 0 16-7.16 16-16v-48h512v48c0 8.84 7.16 16 16 16h32c8.84 0 16-7.16 16-16V240c0-61.86-50.14-112-112-112z"></path></svg></span><br />
              <span class="load"><%= @property.rooms %><small> Bedrooms</small></span>
            </div>

            <div class="col-4">
              <span class="mr-2"><svg height="1.5em" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bath" class="svg-inline--fa fa-bath fa-w-16 text-muted" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32,384a95.4,95.4,0,0,0,32,71.09V496a16,16,0,0,0,16,16h32a16,16,0,0,0,16-16V480H384v16a16,16,0,0,0,16,16h32a16,16,0,0,0,16-16V455.09A95.4,95.4,0,0,0,480,384V336H32ZM496,256H80V69.25a21.26,21.26,0,0,1,36.28-15l19.27,19.26c-13.13,29.88-7.61,59.11,8.62,79.73l-.17.17A16,16,0,0,0,144,176l11.31,11.31a16,16,0,0,0,22.63,0L283.31,81.94a16,16,0,0,0,0-22.63L272,48a16,16,0,0,0-22.62,0l-.17.17c-20.62-16.23-49.83-21.75-79.73-8.62L150.22,20.28A69.25,69.25,0,0,0,32,69.25V256H16A16,16,0,0,0,0,272v16a16,16,0,0,0,16,16H496a16,16,0,0,0,16-16V272A16,16,0,0,0,496,256Z"></path></svg></span><br />
              <span class="load"><%= @property.bathrooms %><small> Bathrooms</small></span>
            </div>

            <div class="col-4">
              <span class="load"><svg height="1.5em" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="car" class="svg-inline--fa fa-car fa-w-16 text-muted" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M499.99 176h-59.87l-16.64-41.6C406.38 91.63 365.57 64 319.5 64h-127c-46.06 0-86.88 27.63-103.99 70.4L71.87 176H12.01C4.2 176-1.53 183.34.37 190.91l6 24C7.7 220.25 12.5 224 18.01 224h20.07C24.65 235.73 16 252.78 16 272v48c0 16.12 6.16 30.67 16 41.93V416c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32v-32h256v32c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32v-54.07c9.84-11.25 16-25.8 16-41.93v-48c0-19.22-8.65-36.27-22.07-48H494c5.51 0 10.31-3.75 11.64-9.09l6-24c1.89-7.57-3.84-14.91-11.65-14.91zm-352.06-17.83c7.29-18.22 24.94-30.17 44.57-30.17h127c19.63 0 37.28 11.95 44.57 30.17L384 208H128l19.93-49.83zM96 319.8c-19.2 0-32-12.76-32-31.9S76.8 256 96 256s48 28.71 48 47.85-28.8 15.95-48 15.95zm320 0c-19.2 0-48 3.19-48-15.95S396.8 256 416 256s32 12.76 32 31.9-12.8 31.9-32 31.9z"></path></svg></span><br />
              <span class=""><%= @property.parking_spaces %><small> Parking</small></span>
            </div>
          </div>
        </div>
      </div>
      <div class="row border-top border-bottom mt-5 mb-4 pt-4 pb-4">
        <div class="col-6">
          <% if @property.for_sale? %>
            <strong><%= link_to "Est. Monthly Repayments of #{number_to_currency((@property.price - (@property.price * 0.1)) / 360,precision: 0) } *", "#", class: "text-success" %></strong>
          <% else %>
            <strong>Available from <%= @property.available_date.strftime("%a") %>, <%= @property.available_date.day.ordinalize %> <%= @property.available_date.strftime("%B") %></strong>
          <% end %>
        </div>
        <div class="col-6 text-right">
          <strong><%= link_to "Can I afford this property?", "#", class: "text-success" %></strong>
        </div>
      </div>
        <div class="row">
          <div class="col">
            <p class="h3">
              <strong><%= @property.name %></strong>
            </p>
            <p class="h5">Property Description</p>
            
            <div id="prop-details" class="">
              <%= simple_format @property.details %>
            </div>
            
            <button class="btn btn-outline-info mt-3" id="toggleDetails">Show more</button>
            
            <% if @property.for_sale %>
              <p class="mt-5">* This is based on a 30 year mortgage, after paying an initial 10% down payement. Shorter term mortages would require a higher monthly repayment.</p>
            <% end %>
        </div>
      </div>
    </div>
  <div class="col-md-4">
    <%= render "properties/agent_details" %>
    
    <iframe class="ml-lg-4 mt-3" width="320" height="240" frameborder="0" style="border:0" src="https://www.google.com/maps/embed/v1/place?key&q=AIzaSyCeMxkjcOlOciK3AhSOV7asoBbGEDxl1Gk<%= @property.address.to_param %>" allowfullscreen></iframe> 
  </div>
</div>
  
<section class="mt-5 mb-5">
  <div class="container">
    <div class="row">
      <div class="col">
        <p class="h3 mb-3">Other properties by this agent</p>
      </div>
      <%= render "properties/list", properties: @agent_properties %>
    </div>
  </div>
</section>

<%= render "properties/send_email_modal" %>